---
tileSize: "single"

title: "V-Ray for Maya Linear Workflow Guide"
date: 2014-02-06T12:00:00-00:00
draft: false

summary: "Quick guide to proper color management in V-Ray for Maya."
tags: ["Tag 1", "Tag 2"]
categories: ["Reference", "Category 2"]

category: 'Reference'

---

<!--postText--> {{< postText >}} 
<p>Linear workflow is among the first topics I researched when I started playing with Maya. Coming from 3ds Max, I figured that linear workflow (LWF) in Maya would be equally straightforward. However this turns out not to be the case. <mark>Please note that this is the manual way to do LWF in Maya. I think it is important to understand how to do it, but there are many ways to automate this process.</mark></p>

<p>This is not an explanation as to what is LWF and / or why it is important. There are plenty of well written articles on that. <a class="link link--loud-simple" href="https://www.ronenbekerman.com/linear-workflow-made-simple/">Linear Workflow Made Simple</a> by Matt Gorner is a good primer on the topic. This post will try to explain the way I do linear workflow in Maya with V-Ray.</p>

<p>Here is an image rendered with LWF:</p>
{{< /postText >}}

<!--postImage--> {{< postImage filename="000*" size="small" alt="alt text" >}} 

<!--postText--> {{< postText >}} 
<p>Compared to the same image without proper gamma correction:</p>
{{< /postText >}}

<!--postImage--> {{< postImage filename="001*" size="small" alt="alt text" >}} 



<!--postText--> {{< postText >}} 
<h2>Workflow Summary</h2>

<p>Under VRay ➡ Color mapping tab in Render Settings window:</p>

<ul>
    <li>Type: Linear multiply</li>
    <li>Dark multiplier: 1.000</li>
    <li>Bright multiplier: 1.000</li>
    <li>Gamma: 2.200</li>
    <li>Affect background: ON</li>
    <li>Subpixel mapping: OFF</li>
    <li>Don’t affect colors (adaption only): ON</li>
    <li>Linear workflow: OFF</li>
    <li>Clamp output: OFF</li>
    <li>Affect swatches: ON (this way the swatch samples in Hypershade are displayed correctly)</li>
</ul>
{{< /postText >}}

<!--postImage--> {{< postImage filename="002*" size="small" alt="alt text" >}} 


<!--postText--> {{< postText >}} 
<p>For sRGB textures, go to the file node and add Texture input gamma under Attributes ➡ VRay</p>
{{< /postText >}}

<!--postImage--> {{< postImage filename="003*" size="small" alt="alt text" >}} 

<!--postText--> {{< postText >}}
<p>For procedural colors / textures within Maya, plug the node into a Gamma Correct node with these settings:</p>
{{< /postText >}}

<!--postImage--> {{< postImage filename="004*" size="small" alt="alt text" >}} 

<!--postImage--> {{< postImage filename="005*" size="small" alt="alt text" >}} 

<!--postText--> {{< postText >}}
<p>I generally output my renders in OpenEXR. If you want to output in an sRGB format straight from Maya then you’ll have to turn Don’t affect colors (adaption only) option off.</p>

<p>And don’t forget to press the sRGB button in the V-Ray frame buffer window to display your image properly. This is if the Don’t affect colors (adaption only) option is on.</p>

<h2>Further Explanation</h2>

<p>Here are a few extra images to demonstrate the process.</p>

<p>Below is an image with proper gamma correction settings applied in the Render Settings window. However the file textures and procedural swatches / ramp are not corrected yet. You can clearly see from the rectangle with the procedural ramp shader and the materials with file textures that they are going through double gamma correction (midtones are too bright).</p>
{{< /postText >}}

<!--postImage--> {{< postImage filename="006*" size="small" alt="alt text" >}} 

<!--postText--> {{< postText >}}
<p>Using Gamma Correction nodes (set to 0.455) to fix the procedural colors / textures. File textures still render incorrectly:</p>
{{< /postText >}}

<!--postImage--> {{< postImage filename="007*" size="small" alt="alt text" >}} 

<!--postText--> {{< postText >}}
<p>By adding the Texture input gamma attributes in the file nodes, file textures now render correctly:</p>
{{< /postText >}}

<!--postImage--> {{< postImage filename="008*" size="small" alt="alt text" >}} 

<!--postText--> {{< postText >}}
<p>Finally here is the effect of enabling Affect swatches option:</p>
{{< /postText >}}

<!--postImage--> {{< postImage filename="009*" size="small" alt="alt text" >}} 


